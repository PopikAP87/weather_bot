version: "3.9"

services:
  weather_bot_db:
    image: postgres:latest
    container_name: test_weather_bot_db
    restart: always
    volumes:
      - ../database:/docker-entrypoint-initdb.d/
      - postgres_data_weather_bot_test:/var/lib/postgresql/data/
    environment:
      POSTGRES_USER: root
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: postgres
      APP_DB_NAME: test_weather_bot
      APP_DB_USER: test_weather_bot
      APP_DB_PASS: test_weather_bot
      # порт target обязательно должен быть 5432, т.к. это порт ДБ внутри контейнера
      # наружу выставлен порт 5435 для избегания конфликтов с локальной ДБ и рабочей БД weather_bot
    ports:
      - "5435:5432"


volumes:
  postgres_data_weather_bot_test: